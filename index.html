<!doctype html>
<html>
	<head>
		<title>Supershape.js</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<meta name="description" content="Supershape.js visualizes the 3D super formula with three.js." />
		<meta name="keywords" content="supershape, superformula, three.js, supershape.js, generative design" />
		<link rel="canonical" href="http://supershape.ahoi.in/" />
		<style type="text/css">
			#container { position: absolute;top:0px;bottom:0px;left:0px;right:0px;overflow:hidden;  }
			.info { position: absolute;top:10px;left:310px;overflow:hidden;color:white;font: 12px 'Lucida Grande', sans-serif; width:200px; line-height: 20px;}
			.info a {color: white;text-decoration: none;text-transform: uppercase;}
			.dg.a, .dg.a .close-button {width:300px !important;}
		</style>
  <script src="http://meemoo.org/meemoo/v1/meemoo-min.js"></script>
	</head>
	<body>
		<div id="container"></div>
	</body>
</html>
<script src="lib/dat.gui.min.js"></script>	
<script src="lib/three.js/Three.js"></script>
<script src="lib/three.js/Detector.js"></script>

<!-- <script src="lib/three.js/Stats.js"></script> -->
<script src="lib/threex/THREEx.WindowResize.js"></script>
<script src="lib/threex/THREEx.FullScreen.js"></script>
<script src="lib/threex/THREEx.screenshot.js"></script>


<script src="lib/three.js/ShaderExtras.js"></script>
<script src="lib/three.js/postprocessing/EffectComposer.js"></script>
<script src="lib/three.js/postprocessing/RenderPass.js"></script>
<script src="lib/three.js/postprocessing/ShaderPass.js"></script>
<script src="lib/three.js/postprocessing/MaskPass.js"></script>	


<script src="js/variables.js" type="text/javascript"></script>
<script src="js/objects.js" type="text/javascript"></script>
<script src="js/eventHandler.js" type="text/javascript"></script>
<script src="js/setup.js" type="text/javascript"></script>
<script src="js/gui.js" type="text/javascript"></script>	
<script type="text/javascript">

  function scale(x, min_from, max_from, min_to, max_to) {
    return((max_to-min_to)*(x-min_from)/(max_from-min_from));
  }

  Meemoo.addInputs({
  a1: { action: function (v) { a1 = scale(v, 0, 127, 0, 5); object.update(); }, type: "float" },
  b1: { action: function (v) { b1 = scale(v, 0, 127, 0, 5); object.update(); }, type: "float" },
  m1: { action: function (v) { m1 = scale(v, 0, 127, 0, 20); object.update(); }, type: "float" },
  n11: { action: function (v) { n11 = scale(v, 0, 127, 0, 100); object.update(); }, type: "float" },
  n21: { action: function (v) { n21 = scale(v, 0, 127, -50, 100); object.update(); }, type: "float" },
  n31: { action: function (v) { n31 = scale(v, 0, 127, -50, 100); object.update(); }, type: "float" },

  a2: { action: function (v) { a2 = scale(v, 0, 127, 0, 5); object.update(); }, type: "float" },
  b2: { action: function (v) { b2 = scale(v, 0, 127, 0, 5); object.update(); }, type: "float" },
  m2: { action: function (v) { m2 = scale(v, 0, 127, 0, 20); object.update(); }, type: "float" },
  n12: { action: function (v) { n12 = scale(v, 0, 127, 0, 100); object.update(); }, type: "float" },
  n22: { action: function (v) { n22 = scale(v, 0, 127, -50, 100); object.update(); }, type: "float" },
  n32: { action: function (v) { n32 = scale(v, 0, 127, -50, 100); object.update(); }, type: "float" },
  color: { action: function (v) { color = "0x" + v.substring(1, v.length); console.log(color); object.update(); }, type: "string" },
  bgcolor: { action: function (v) { backgroundColor = "0x" + v.substring(1, v.length);
                                    renderer.setClearColor(new THREE.Color(backgroundColor)); }, type: "string" },
  send: { action: function (b) { var dataURL = renderer.domElement.toDataURL();
                                Meemoo.send("dataurl", dataURL); }, type: "bang" }
}).addOutputs({
  dataurl: {
    type: "data:image"
  }
});

	initApp();
</script>
